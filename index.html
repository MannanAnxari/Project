<!doctype html>
<html lang="en">

<head>
  <title>Thrift Fashion Store - Home</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://kit.fontawesome.com/20b4506959.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.0/gsap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.4/tailwind.min.css">
  <link rel="stylesheet" href="https://unpkg.com/flowbite@1.5.2/dist/flowbite.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <script src="https://unpkg.com/flowbite@1.5.2/dist/flowbite.js"></script>
  <link rel="stylesheet" href="style.css">

</head>

<body>

  <div id="search" class="fade">
    <a href="#" class="close-btn" id="close-search">
      <em class="fa fa-times"></em>
    </a>
    <input placeholder="Find Products Here..." id="searchdata" type="search" class="transition" />
    <ul class="list-group" id="result"></ul>
  </div>

  <nav class="bg-transparent border-gray-200 px-2 sm:px-4 py-2.5 rounded dark:bg-gray-900">
    <div class="nav-container flex flex-wrap justify-between items-center mx-auto">
      <a href="#" class="flex items-center">
        <img src="assets/img/Logo.png" class="w-28" style="filter: saturate(0) brightness(1.5);" alt="">

      </a>
      <div class="flex items-center md:order-2">

        <button type="button"
          class="flex mr-3 text-sm bg-gray-800 rounded-full md:mr-0 ring-2 ring-gray-300 dark:ring-gray-600"
          id="user-menu-button" aria-expanded="false" data-dropdown-toggle="user-dropdown"
          data-dropdown-placement="bottom">
          <span class="sr-only">Open user menu</span>
          <img class="w-8 h-8 rounded-full" style="filter: invert(1);"
            src="https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png" alt="user photo">
        </button>
        <span class="block px-4 text-sm font-medium truncate text-white"> Welcome, <span id="username"></span>!
        </span>
        <div
          class="hidden z-50 my-4 text-base list-none bg-white rounded divide-y divide-gray-100 shadow dark:bg-gray-700 dark:divide-gray-600"
          id="user-dropdown">
          <ul class="py-1" aria-labelledby="user-menu-button">
            <li>
              <a onclick="removeItem()" href="#"
                class="block py-2 px-4 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">Sign
                out</a>
            </li>
          </ul>
        </div>
        <button data-collapse-toggle="mobile-menu-2" type="button"
          class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
          aria-controls="mobile-menu-2" aria-expanded="false">
          <span class="sr-only">Open main menu</span>
          <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
              d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
              clip-rule="evenodd"></path>
          </svg>
        </button>
      </div>
      <div class="hidden justify-between items-center w-full md:flex md:w-auto md:order-1" id="mobile-menu-2">
        <ul
          class="flex flex-col p-4 mt-4   rounded-lg  md:flex-row md:space-x-4 md:mt-0 md:text-sm md:font-medium md:border-0  dark:bg-gray-800 md:dark:bg-gray-900  ">
          <li>
            <a href="#"
              class="block py-2 pr-4 pl-3 mouseactive text-white rounded md:bg-transparent md:p-0 dark:text-white"
              aria-current="page" id="home_button">Home</a>
          </li>
          <li>
            <a href="#"
              class="block py-2 pr-4 pl-3 mouseactive text-white rounded md:bg-transparent md:p-0 dark:text-white"
              aria-current="page" id="product_button">PRODUCTS</a>
          </li>
          <li>
            <a href="#"
              class="block py-2 pr-4 pl-3 mouseactive text-white rounded md:bg-transparent md:p-0 dark:text-white"
              aria-current="page" id="about_button">ABOUT</a>
          </li>
          <li>
            <a href="#"
              class="block py-2 pr-4 pl-3 mouseactive text-white rounded md:bg-transparent md:p-0 dark:text-white"
              aria-current="page" id="contact_button">CONTACT</a>
          </li>
          <li>
            <a href="#"
              class="block py-2 pr-4 pl-3 mouseactive text-white rounded md:bg-transparent md:p-0 dark:text-white"
              aria-current="page" id="contact_button">FEEDBACK</a>
          </li>


          <li>
            <a href="#search"
              class="block py-2 pr-4 pl-3 mouseactive text-white rounded md:bg-transparent md:p-0 dark:text-white"
              aria-current="page" id="contact_button"> <i class="fa fa-search"></i></a>
          </li>

        </ul>
      </div>
    </div>
  </nav>

  <div id="content"></div>
  <div class="cursor"></div>
  <marquee><span id="location-j75"></span> <span id="date-j75"></span></marquee>

  <script>
    getLocation();
    var j75 = document.getElementById("location-j75");

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        j75.innerHTML = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      j75.innerHTML = " Latitude: " + position.coords.latitude +
        " Longitude: " + position.coords.longitude;
    }

    var now = new Date();
    document.getElementById("date-j75").innerHTML = now;
  </script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="https://unpkg.co/gsap@3/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
  <script src="assets/js/main.js"></script>
</body>

</html>

<script>

  var cartOpen = false;
  var numberOfProducts = 0;

  $('body').on('click', '.js-toggle-cart', toggleCart);

  function toggleCart(e) {
    e.preventDefault();
    if (cartOpen) {
      closeCart();
      return;
    }
    openCart();
  }

  function openCart() {
    cartOpen = true;
    $('body').addClass('open');
  }

  function closeCart() {
    cartOpen = false;
    $('body').removeClass('open');
  }



  var changeClass = function (name) {
    $('#search').removeAttr('class').addClass(name);
  }


  $(document).ready(function () {
    $.ajaxSetup({ cache: false });
    $('#searchdata').keyup(function () {
      console.log();
      if (this.value.length > 0) {
        $(this).css("transform", "translateY(-40vh)");
        $('#result').html('');
        $('#state').val('');
        var searchField = $('#searchdata').val();
        var expression = new RegExp(searchField, "i");
        $.getJSON('./assets/JSON/searchData.json', function (data) {
          $.each(data, function (key, value) {
            if (value.name.search(expression) != -1 || value.location.search(expression) != -1) {
              $('#result').append('<li class="list-group-item link-class transition search_item flex items-center h-20" onclick="goToProduct()"><img src="' + value.image_url + '" class="img-thumbnail mx-4" /> ' + value.name + ' | <span class="text-muted">' + value.after_price + '</span></li>');
            }
          });
        });
      }
      else {
        $('#result').html('');
        $(this).css("transform", "translateY(0vh)");
      }
    });

    $('#result').on('click', 'li', function () {
      var click_text = $(this).text().split('|');
      $('#searchdata').val($.trim(click_text[0]));
      $("#result").html('');
    });
  });



  var key = 'name';
  var user = localStorage.getItem(key);
  if (user === null || user === '' || user === 'null') {
    swal("Type Username Here:", {
      content: "input",
    })
      .then((value) => {
        let userName = value;
        localStorage.setItem(key, userName);
        window.location.href = '/'
      });

  }
  else {
    document.getElementById('username').innerHTML = user;

    $('#content').load('home.html');

    $('#home_button').click(() => {
      $('#content').load('home.html');
    })

    $('#about_button').click(() => {
      $('#content').load('about.html');
    })
    $('#product_button').click(() => {
      $('#content').load('product.html');
    })
    $('#contact_button').click(() => {
      $('#content').load('contact.html');
    });

  }

  const goToProduct = () => {
    $('#content').load('product.html');
  }


  function removeItem() {
    localStorage.removeItem("name");
    localStorage.removeItem("products");
    window.location.href = '/'
  } 
</script>