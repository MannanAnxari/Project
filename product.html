<div class="container">
    <div class="products">
        <div class="container">
            <h1 class="lg-title">Special Shoes Discount Offer</h1>
            <p class="text-light">Sneakers are shoes primarily designed for sports or other forms of physical exercise,
                but which are now also widely used for everyday casual wear.</p>

            <div class="product-items" id="cards">

                <!-- <div class="product">
                    <div class="product-content">
                        <div class="product-img">
                            <img src="assets/img/shoe-2.png" alt="product image">
                        </div>
                        <div class="product-btns">
                            <button type="button" class="btn-cart changebtn"> add to
                                cart
                                <span><i class="fas fa-plus"></i></span>
                            </button>
                            <button type="button" class="btn-buy"> buy now
                                <span><i class="fas fa-shopping-cart"></i></span>
                            </button>
                        </div>
                    </div>

                    <div class="product-info">
                        <div class="product-info-top">
                            <h2 class="sm-title">lifestyle</h2>
                            <div class="rating">
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="far fa-star"></i></span>
                            </div>
                        </div>
                        <a href="#" class="product-name text-ellipsis overflow-hidden ">mens shoes DN 23XX, new
                            product</a>
                        <p class="product-price">$ 150.00</p>
                        <p class="product-price">$ 133.00</p>
                    </div>
                </div>
                <div class="product">
                    <div class="product-content">
                        <div class="product-img">
                            <img src="assets/img/shoe-3.png" alt="product image">
                        </div>
                        <div class="product-btns">
                            <button type="button" class="btn-cart changebtn"> add to
                                cart
                                <span><i class="fas fa-plus"></i></span>
                            </button>
                            <button type="button" class="btn-buy"> buy now
                                <span><i class="fas fa-shopping-cart"></i></span>
                            </button>
                        </div>
                    </div>

                    <div class="product-info">
                        <div class="product-info-top">
                            <h2 class="sm-title">lifestyle</h2>
                            <div class="rating">
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="far fa-star"></i></span>
                            </div>
                        </div>
                        <a href="#" class="product-name text-ellipsis overflow-hidden ">mens shoes DN 23XX, new
                            product</a>
                        <p class="product-price">$ 150.00</p>
                        <p class="product-price">$ 133.00</p>
                    </div>
                </div>
                <div class="product">
                    <div class="product-content">
                        <div class="product-img">
                            <img src="assets/img/shoe-4.png" alt="product image">
                        </div>
                        <div class="product-btns">
                            <button type="button" class="btn-cart changebtn"> add to
                                cart
                                <span><i class="fas fa-plus"></i></span>
                            </button>
                            <button type="button" class="btn-buy"> buy now
                                <span><i class="fas fa-shopping-cart"></i></span>
                            </button>
                        </div>
                    </div>

                    <div class="product-info">
                        <div class="product-info-top">
                            <h2 class="sm-title">lifestyle</h2>
                            <div class="rating">
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="far fa-star"></i></span>
                            </div>
                        </div>
                        <a href="#" class="product-name text-ellipsis overflow-hidden ">mens shoes DN 23XX, new
                            product</a>
                        <p class="product-price">$ 150.00</p>
                        <p class="product-price">$ 133.00</p>
                    </div>

                    <div class="off-info">
                        <h2 class="sm-title">25% off</h2>
                    </div>
                </div>
                <div class="product">
                    <div class="product-content">
                        <div class="product-img">
                            <img src="assets/img/shoe-5.png" alt="product image">
                        </div>
                        <div class="product-btns">
                            <button type="button" class="btn-cart changebtn"> add to
                                cart
                                <span><i class="fas fa-plus"></i></span>
                            </button>
                            <button type="button" class="btn-buy"> buy now
                                <span><i class="fas fa-shopping-cart"></i></span>
                            </button>
                        </div>
                    </div>

                    <div class="product-info">
                        <div class="product-info-top">
                            <h2 class="sm-title">lifestyle</h2>
                            <div class="rating">
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="far fa-star"></i></span>
                            </div>
                        </div>
                        <a href="#"
                            class="product-name text-ellipsis overflow-hidden  text-ellipsis overflow-hidden ">womens
                            sashoes DN 23XX, new product</a>
                        <p class="product-price">$ 150.00</p>
                        <p class="product-price">$ 133.00</p>
                    </div>
                </div>
                <div class="product">
                    <div class="product-content">
                        <div class="product-img">
                            <img src="assets/img/shoe-6.png" alt="product image">
                        </div>
                        <div class="product-btns">
                            <button type="button" class="btn-cart changebtn"> add to
                                cart
                                <span><i class="fas fa-plus"></i></span>
                            </button>
                            <button type="button" class="btn-buy"> buy now
                                <span><i class="fas fa-shopping-cart"></i></span>
                            </button>
                        </div>
                    </div>

                    <div class="product-info">
                        <div class="product-info-top">
                            <h2 class="sm-title">lifestyle</h2>
                            <div class="rating">
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="far fa-star"></i></span>
                            </div>
                        </div>
                        <a href="#" class="product-name text-ellipsis overflow-hidden ">womens shoes DN 23XX, new
                            product</a>
                        <p class="product-price">$ 150.00</p>
                        <p class="product-price">$ 133.00</p>
                    </div>
                </div>
                <div class="product">
                    <div class="product-content">
                        <div class="product-img">
                            <img src="assets/img/shoe-7.png" alt="product image">
                        </div>
                        <div class="product-btns">
                            <button type="button" class="btn-cart changebtn"> add to
                                cart
                                <span><i class="fas fa-plus"></i></span>
                            </button>
                            <button type="button" class="btn-buy"> buy now
                                <span><i class="fas fa-shopping-cart"></i></span>
                            </button>
                        </div>
                    </div>

                    <div class="product-info">
                        <div class="product-info-top">
                            <h2 class="sm-title">lifestyle</h2>
                            <div class="rating">
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="far fa-star"></i></span>
                            </div>
                        </div>
                        <a href="#" class="product-name text-ellipsis overflow-hidden ">womens shoes DN 23XX, new
                            product</a>
                        <p class="product-price">$ 150.00</p>
                        <p class="product-price">$ 133.00</p>
                    </div>
                </div>
                <div class="product">
                    <div class="product-content">
                        <div class="product-img">
                            <img src="assets/img/shoe-8.png" alt="product image">
                        </div>
                        <div class="product-btns">
                            <button type="button" class="btn-cart changebtn"> add to
                                cart
                                <span><i class="fas fa-plus"></i></span>
                            </button>
                            <button type="button" class="btn-buy"> buy now
                                <span><i class="fas fa-shopping-cart"></i></span>
                            </button>
                        </div>
                    </div>

                    <div class="product-info">
                        <div class="product-info-top">
                            <h2 class="sm-title">lifestyle</h2>
                            <div class="rating">
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="fas fa-star"></i></span>
                                <span><i class="far fa-star"></i></span>
                            </div>
                        </div>
                        <a href="#" class="product-name text-ellipsis overflow-hidden ">womens shoes DN 23XX, new
                            product</a>
                        <p class="product-price">$ 150.00</p>
                        <p class="product-price">$ 133.00</p>
                    </div>

                    <div class="off-info">
                        <h2 class="sm-title">35% off</h2>
                    </div>
                </div>  -->
            </div>
        </div>
    </div>

    <!-- <div class = "product-collection">
    <div class = "container">
        <div class = "product-collection-wrapper"> 
            <div class = "product-col-left flex">
                <div class = "product-col-content">
                    <h2 class = "sm-title">men's shoes </h2>
                    <h2 class = "md-title">men's collection </h2>
                    <p class = "text-light">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestiae consequatur facilis eligendi quibusdam voluptatibus exercitationem autem voluptatum, beatae architecto odit, quisquam repellat. Deleniti, architecto ab.</p>
                    <button type = "button" class = "btn-dark">Shop now</button>
                </div>
            </div>
 
            <div class = "product-col-right">
                <div class = "product-col-r-top flex">
                    <div class = "product-col-content">
                        <h2 class = "sm-title">women's dresses </h2>
                        <h2 class = "md-title">women's collection </h2>
                        <p class = "text-light">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestiae consequatur facilis eligendi quibusdam voluptatibus exercitationem autem voluptatum, beatae architecto odit, quisquam repellat. Deleniti, architecto ab.</p>
                        <button type = "button" class = "btn-dark">Shop now</button>
                    </div>
                </div>

                <div class = "product-col-r-bottom"> 
                    <div class = "flex">
                        <div class = "product-col-content">
                            <h2 class = "sm-title">summer sale </h2>
                            <h2 class = "md-title">Extra 50% Off </h2>
                            <p class = "text-light">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestiae consequatur facilis eligendi quibusdam voluptatibus exercitationem autem voluptatum, beatae architecto odit, quisquam repellat. Deleniti, architecto ab.</p>
                            <button type = "button" class = "btn-dark">Shop now</button>
                        </div>
                    </div> 
                    <div class = "flex">
                        <div class = "product-col-content">
                            <h2 class = "sm-title">shoes </h2>
                            <h2 class = "md-title">best sellers </h2>
                            <p class = "text-light">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestiae consequatur facilis eligendi quibusdam voluptatibus exercitationem autem voluptatum, beatae architecto odit, quisquam repellat. Deleniti, architecto ab.</p>
                            <button type = "button" class = "btn-dark">Shop now</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> -->
</div>

<section class="shop">
    <div class="shop__header">
        <div class="inline-flex absolute -top-4 -left-2 justify-center items-center w-6 h-6 text-xs font-bold text-white bg-red-500 rounded-full opacity-0 border-2 border-white dark:border-gray-900"
            id="card_items">0</div>
        <a class="card_btn js-toggle-cart" href="#" title="View cart">
            <i class="fa-brands fa-opencart"></i>
        </a>
    </div>

</section>

<aside class="cart js-cart">
    <div class="cart__header flex justify-between items-center">
        <h1 class="text-gray-900 cart__title">Shopping cart</h1>
        <p class="cart__text">
            <a class="button button-cart-close js-toggle-cart text-gray-900" href="#" title="Close cart">
                <i class="fa-solid fa-xmark"></i>
            </a>
        </p>
    </div>
    <div class="cart__products js-cart-products">
        <div class="p-4">
            <div id="cart_item">

            </div>
            <!-- <div class=" w-full lg:max-w-full lg:flex" >
                <div class="h-48 lg:h-auto lg:w-20 flex-none bg-cover rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden"
                    style="background-image: url('./assets/img/fashion-img-1.jpg')" title="Mountain">
                </div>
                <div
                    class="border-r border-b border-l border-gray-400 lg:border-l-0 lg:border-t lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal">

                    <div class="text-gray-900 font-bold text-xl mb-2">Best Mountain Trails 2020</div>

                    <div class="flex content-center items-center">
                        <div class="text-sm">
                            <p class="text-gray-600 flex items-center">Quantity: <input style="
                                width: 25%;
                                height: 25px;
                                margin-left: 10px;" type="number" value="1"></p>
                            <p class="text-gray-900 mt-2 text-lg leading-none">$49.50 </p>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>
        <div class="cart__product js-cart-product-template">
            <article class="js-cart-product">
                <h1>Product title</h1>
                <p>
                    <a class="js-remove-product" href="#" title="Delete product">
                        Delete product
                    </a>
                </p>
            </article>
        </div>
    </div>
    <div class="cart__footer">
        <div class="cart__text flex space-between">
            <h1 class="text-blue-700">$5465</h1>
            <button
                class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded transition">
                Check Out
            </button>
        </div>
    </div>
</aside>

<div class="lightbox js-lightbox js-toggle-cart"></div>

<script>
    var cartOpen = false;
    var numberOfProducts = 0;

    $('body').on('click', '.js-toggle-cart', toggleCart);

    function toggleCart(e) {
        e.preventDefault();
        if (cartOpen) {
            closeCart();
            return;
        }
        openCart();
    }

    function openCart() {
        cartOpen = true;
        $('body').addClass('open');
    }

    function closeCart() {
        cartOpen = false;
        $('body').removeClass('open');
    }
</script>

<script>
    var card = ``;

    fetch('./assets/JSON/data.json')
        .then((response) => response.json())
        .then((data) => {


            for (let i = 0; i < data.length; i++) {
                const element = data[i];
                card += `<div class="product">
                      <div class="product-content">
                          <div class="product-img">
                              <img src="${element.image_url}" alt="product image">
                          </div>
                          <div class="product-btns">
                              <button type="button" class="btn-cart changebtn" onclick="cart('${element.image_url}','${element.name}','${element.after_price}')"> add to
                                  cart
                                  <span><i class="fas fa-plus"></i></span>
                              </button>
                              <button type="button" class="btn-buy"> buy now
                                  <span><i class="fas fa-shopping-cart"></i></span>
                              </button>
                          </div>
                      </div> 
                      <div class="product-info">
                          <div class="product-info-top">
                              <h2 class="sm-title">lifestyle</h2>
                              <div class="rating">
                                  <span><i class="fas fa-star"></i></span>
                                  <span><i class="fas fa-star"></i></span>
                                  <span><i class="fas fa-star"></i></span>
                                  <span><i class="fas fa-star"></i></span>
                                  <span><i class="far fa-star"></i></span>
                              </div>
                          </div>
                          <a href="#" class="product-name text-ellipsis overflow-hidden ">${element.name}</a>
                          <p class="product-price">$ ${element.before_price}</p>
                          <p class="product-price">$ ${element.after_price}</p>
                      </div>
  
                      <div class="off-info">
                          <h2 class="sm-title">${element.discount}% off</h2>
                      </div>
                  </div>`
            }
            document.getElementById('cards').innerHTML = card
        }
        );


    var users = [];
    let cart_key = 'cart_items';

    
    function cart(img, name, price) {
        users.push({
            img: img,
            name: name,
            price: price
        });
        localStorage.setItem(cart_key, JSON.stringify(users));
    }



    var count_container = document.getElementById('card_items');
    let checkBtnInc = 0;
    $(document).on("click", '.changebtn', function () {





        this.innerHTML = 'Added ✓';

        if ($(this).hasClass('disabled')) {
        }
        else {
            $(this).addClass('disabled');
            checkBtnInc++;
            if (count_container.innerHTML >= 0) {
                count_container.style.cssText = "transform: translateY(0px); opacity: 1;";
            }





        }

        card_items.innerHTML = checkBtnInc;




    });



    var cart_val = localStorage.getItem(cart_key);
    cart_val = JSON.parse(cart_val);
    var cart_item = '';
    for (let i = 0; i < cart_val.length; i++) {
        const cart_value = cart_val[i];
        var updated_price = cart_value.price;
        function qty(num) {
            var new_Price = updated_price * num;
            console.log(new_Price);
        }

        cart_item += `      <div class=" w-full lg:max-w-full lg:flex border-r border-b border-l border-gray-400 lg:border-l-0 lg:border-t lg:border-gray-400 my-2" >
                <div class="h-48 lg:h-auto lg:w-20 flex-none bg-cover rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden"
                    style="background-image: url('${cart_value.img}')" title="Mountain">
                </div>
                <div
                    class=" bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal">

                    <div class="text-gray-900 font-bold text-xl mb-2">${cart_value.name}</div>

                    <div class="flex content-center items-center">
                        <div class="text-sm">
                            <p class="text-gray-600 flex items-center">Quantity: <input onchange="qty(this.value)" class="qty" min="1" style="
                                width: 25%;
                                height: 25px;
                                margin-left: 10px;" type="number" value="1"></p>
                            <p class="text-gray-900 mt-2 text-lg leading-none itm_price">$ ${updated_price}</p>
                        </div>
                    </div>
                </div>
            </div>`
    }
    document.getElementById('cart_item').innerHTML = cart_item;


</script>